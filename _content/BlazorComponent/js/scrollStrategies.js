function e(e,t){const l=[];if(t&&e&&!t.contains(e))return l;for(;e&&(o(e)&&l.push(e),e!==t);)e=e.parentElement;return l}function o(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const o=window.getComputedStyle(e);return"scroll"===o.overflowY||"auto"===o.overflowY&&e.scrollHeight>e.clientHeight}let t=!1;try{if("undefined"!=typeof window){const e=Object.defineProperty({},"passive",{get:()=>{t=!0}});window.addEventListener("testListener",e,e),window.removeEventListener("testListener",e,e)}}catch(e){console.warn(e)}function l(e,o="px"){return null==e||""===e?void 0:isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${o}`:void 0}Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});class r{constructor(e,o,t){e&&(this.root=e,this.contentEl=o,this.options=t)}bind(){"block"===this.options.strategy&&this._blockScroll()}unbind(){"block"===this.options.strategy&&this._unblockScroll()}_prepareBlock(){const t=this.root.offsetParent,l=[...new Set([...e(this.contentEl,this.options.contained?t:void 0)])];var r;return{scrollableParent:o(r=t||document.documentElement)&&r,scrollElements:l}}_blockScroll(){let{scrollableParent:e,scrollElements:o}=this._prepareBlock();e&&this.root.classList.add("m-overlay--scroll-blocked");const t=window.innerWidth-document.documentElement.offsetWidth;o.filter((e=>!e.classList.contains("m-overlay-scroll-blocked"))).forEach(((e,o)=>{e.style.setProperty("--m-body-scroll-x",l(-e.scrollLeft)),e.style.setProperty("--m-body-scroll-y",l(-e.scrollTop)),e!==document.documentElement&&e.style.setProperty("--m-scrollbar-offset",l(t)),e.classList.add("m-overlay-scroll-blocked")}))}_unblockScroll(){const{scrollableParent:e,scrollElements:o}=this._prepareBlock();console.log("[unblockScroll] scrollElements",o),o.filter((e=>e.classList.contains("m-overlay-scroll-blocked"))).forEach(((e,o)=>{const t=parseFloat(e.style.getPropertyValue("--m-body-scroll-x")),l=parseFloat(e.style.getPropertyValue("--m-body-scroll-y")),r=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.style.removeProperty("--m-body-scroll-x"),e.style.removeProperty("--m-body-scroll-y"),e.style.removeProperty("--m-scrollbar-offset"),e.classList.remove("m-overlay-scroll-blocked"),e.scrollLeft=-t,e.scrollTop=-l,e.style.scrollBehavior=r})),e&&this.root.classList.remove("m-overlay--scroll-blocked")}}function s(e,o,t){return new r(e,o,t)}export{s as init};
//# sourceMappingURL=scrollStrategies.js.map
